import java.io.*;
import java.net.*;
import javax.net.ssl.*;

public class SslPopClient{
    public static void main(String[]args){
	BufferedReader sysIn = new BufferedReader(new InputStreamReader(System.in)); //Read from console
        PrintStream sysOut = System.out; //Print to console
        SSLSocketFactory mainFactory = (SSLSocketFactory) SSLSocketFactory.getDefault(); //Get default SSL socket factory
        try {
            SSLSocket clientSocket = (SSLSocket) mainFactory.createSocket("smtp.mail.yahoo.com", 465); //create, connect, start handshake
            printSocketInfo(clientSocket); //Print connection info
            BufferedWriter serverWriter = new BufferedWriter(new OutputStreamWriter(clientSocket.getOutputStream())); //Write to server
            BufferedReader serverReader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream())); //Read from server

            String serverInput = null; //Stores latest line from server
            String userInput = ""; //Stores lastest input line from user
	    boolean tryRead = true; //Whether to read next line from serverReader (prevents blocking on multiline SMTP responses)

            //The below booleans, used to successully close the connection, might be unnecessary
            boolean quitUser = false; //Whether the user has entered quit, might be unnecessary
            boolean openRead = true; //Whether serverReader is still open (serverInput != null)
            boolean openSocket = true; //Whether clientSocket is still open (clientSocket != null)

            //SMTP input variables
            boolean sendingData = false;
